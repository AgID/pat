<?include_once 'app/moduli/menu_amm/operazioni/oggetti/OperazioneDefault.php';class strutture extends OperazioneDefault {		public function __construct() { }		public function postUpdate($arrayParametri = array()) {		if($_POST['ripeti_norme']) {			$norme = forzaStringa(implode(",",$_POST['norme']));			if($norme != '') {				$arrayEscludi = array(-1, forzaNumero($_GET['id']));				$this->ripetiRiferimentiNormativi(forzaNumero($_GET['id']), $norme, $arrayEscludi);			}		}	}		private function ripetiRiferimentiNormativi($padre, $norme, $arrayEscludi) {		global $database, $dati_db, $enteAdmin;				$sql = "SELECT * FROM ".$dati_db['prefisso']."oggetto_uffici WHERE id_ente = ".$enteAdmin['id']." AND id NOT IN (".implode(',', $arrayEscludi).") AND struttura = ".$padre;		if(!($result = $database->connessioneConReturn($sql))) {}		$records = $database->sqlArrayAss($result);		foreach((array)$records as $rec) {			$sql = "UPDATE ".$dati_db['prefisso']."oggetto_uffici SET norme = '".$norme."' WHERE id_ente = ".$enteAdmin['id']." AND id = ".$rec['id'];			if(!($result = $database->connessioneConReturn($sql))) {}			$arrayEscludi[] = $rec['id'];			$this->ripetiRiferimentiNormativi($rec['id'], $norme, $arrayEscludi);		}	}	}?>